#!/usr/bin/env bash

source "$(dirname ${BASH_SOURCE[0]})/.dev-api"

main() {
  echo $DEV_ENV_DIR
  pushd $DEV_ENV_DIR > /dev/null

  commit-dir env/.config/nvim
  commit-dir env/.config
  commit-dir env/.local
  commit-dir foobar
  commit-dir 

  popd > /dev/null
}

commit-dir () {
  local path=$1
  local dir=$(cd $DEV_ENV_DIR/$path && pwd)
  local name=$(basename $dir)

  log "dev-update $name at $dir"
  git add $dir
  git commit $dir -m "dev-update: $name"
  git push
}

commit-file () {
  local path=$1
  local file=$(cd $DEV_ENV_DIR/$path && pwd)
  local name=$(basename $file)

  log "dev-update $name at $dir"
  git add $file
  git commit $file -m "dev-update: $path"
  git push
}


main
